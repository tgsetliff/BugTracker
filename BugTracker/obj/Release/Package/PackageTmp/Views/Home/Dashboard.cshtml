@using BugTracker.Models.Project;
@using BugTracker.Models.Ticket;
@using Microsoft.AspNet.Identity;

@{
    ViewBag.Title = "Dashboard";
}

<div class="container">
    <div class="col-md-12">
        <div class="col-md-4">
            <div class="panel panel-primary">
                <div class="panel-heading" style="height:90px">
                    <div class="col-md-12 text-center">
                        <h3>@Html.DisplayFor(model => model.Title)</h3>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-4"></div>
                            <div class="col-md-2">
                                @{var ownerName = Model.OwnerUser.FirstName + ' ' + Model.OwnerUser.LastName;}
                                @Html.Raw(ownerName)
                            </div>
                            <div class="col-md-1">
                                @Html.DisplayFor(model => model.CreateDate)
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-title">
                    <div class="col-md-12">
                        @Html.LabelFor(model => model.ProjectId, "Project", htmlAttributes: new { @class = "control-label col-md-3" })
                        @Html.LabelFor(model => model.TicketStatusId, "Status", htmlAttributes: new { @class = "control-label col-md-2" })
                        @Html.LabelFor(model => model.TicketPriorityId, "Priority", htmlAttributes: new { @class = "control-label col-md-2" })
                        @Html.LabelFor(model => model.TicketTypeId, "Ticket Type", htmlAttributes: new { @class = "control-label col-md-2" })
                        @Html.LabelFor(model => model.AssignedToUserId, "Assigned To", htmlAttributes: new { @class = "control-label col-md-2" })
                    </div>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="col-md-3">
                                @Html.DisplayFor(model => model.Project.Name)
                            </div>

                            <div class="col-md-2">
                                @Html.DisplayFor(model => model.TicketStatus.Name)
                            </div>
                            <div class="col-md-2">
                                @Html.DisplayFor(model => model.TicketPriority.Name)
                            </div>
                            <div class="col-md-2">
                                @Html.DisplayFor(model => model.TicketType.Name)
                            </div>
                            <div class="col-md-2">
                                @if (Model.AssignedToUserId != null)
                                {
                                    var assignedUser = Model.AssignedToUser.FirstName + ' ' + Model.AssignedToUser.LastName;
                                    @Html.Raw(assignedUser)
                                }
                                else
                                {
                                    @Html.DisplayFor(model => model.AssignedToUser.FirstName)
                                }

                            </div>
                        </div>
                    </div>
                    <div class="panel-footer">
                        <h5>@Html.DisplayFor(model => model.Description)</h5>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">

        </div>

        <div class="col-md-4">

        </div>
    </div>
</div>
